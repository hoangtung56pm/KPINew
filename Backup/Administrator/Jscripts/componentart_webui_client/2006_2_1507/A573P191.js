if(!window.ComponentArt_CallBack_Loaded){ComponentArt.Web.UI.CallBackEventArgs=function(parameter){if(window.ComponentArt_Atlas){ComponentArt.Web.UI.CallBackEventArgs.initializeBase(this);};var _parameter=parameter;this.get_parameter=function(){return _parameter;};};if(window.ComponentArt_Atlas){ComponentArt.Web.UI.CallBackEventArgs.registerClass('ComponentArt.Web.UI.CallBackEventArgs',Sys.EventArgs);};window.ComponentArt_CallBack=function(id){this.Id=id;this.element=this.DomElement=document.getElementById(id+'_div');this.Parameter=null;if(window.ComponentArt_Atlas){ComponentArt.Web.UI.CallBack.initializeBase(this,[this.element]);this.getDescriptor=function(){return ComponentArt_CreateAtlasTypeDescriptor(this.constructor);};};};ComponentArt_CallBack.prototype.PublicProperties=['Id'];ComponentArt_CallBack.prototype.PublicMethods=[['Callback',,null,[['param',Object]]]];ComponentArt_CallBack.prototype.PublicEvents=[['BeforeCallback'],['CallbackComplete'],['CallbackError'],['Load']];ComponentArt_CreateAtlasAccessors(ComponentArt_CallBack,'this');window.ComponentArt.Web.UI.CallBack=window.ComponentArt_CallBack;if(window.ComponentArt_Atlas){ComponentArt.Web.UI.CallBack.registerClass('ComponentArt.Web.UI.CallBack',Sys.UI.Control);if(Sys.TypeDescriptor)Sys.TypeDescriptor.addType('componentArtWebUI','callBack',ComponentArt.Web.UI.CallBack);};ComponentArt_CallBack.prototype.GetProperty=function(propName){return this[propName];};ComponentArt_CallBack.prototype.SetProperty=function(propName,propValue){this[propName]=propValue;};ComponentArt_CallBack.prototype.Initialize=function(){ComponentArt_HookEvents(this);var qznv=this.get_events().getHandler('load');if(qznv){qznv(this,Sys.EventArgs.Empty);};};window.ComponentArt_CallBack.prototype.ReadData=function(qzau){return qzau.firstChild.nodeValue;};window.ComponentArt_CallBack.prototype.Callback=function(param){this.DomElement=document.getElementById(this.Id+'_div');if(this.Parameter!=param){this.Parameter=param;var oParamObj=document.getElementById(this.Id+'_ParamField');if(oParamObj){oParamObj.value=param;};}else if(this.IsDownLevel){return false;};if(this.IsDownLevel){if(!window.CallbackPostingBack){setTimeout(this.Id+'.Postback();',300);window.CallbackPostingBack=true;};return false;};if(this.Cache){var sContent=this.Cache[param];if(sContent){this.ProcessContent(sContent);return true;};};if(this.CallbackInProgress){return false;}else{this.CallbackInProgress=true;};var qznv=this.get_events().getHandler('beforeCallback');if(qznv){qznv(this,new ComponentArt.Web.UI.CallBackEventArgs(param));};if(this.ClientSideOnCallback){this.ClientSideOnCallback(param);};var url=this.CallbackPrefix,postData="";if(param instanceof Array){for(var qzba=0;qzba<param.length;qzba++){postData+=(qzba>0?"&":"")+"Cart_"+this.Id+"_Callback_Param="+encodeURIComponent(param[qzba]);};}else if(arguments.length>1){for(var qzba=0;qzba<arguments.length;qzba++){postData+=(qzba>0?"&":"")+"Cart_"+this.Id+"_Callback_Param="+encodeURIComponent(arguments[qzba]);};}else{postData="Cart_"+this.Id+"_Callback_Param="+encodeURIComponent(param);};if(this.PostState){if(window.ComponentArt_ClientStateControls){for(var qzba=0;qzba<ComponentArt_ClientStateControls.length;qzba++){if(ComponentArt_ClientStateControls[qzba].SaveData){ComponentArt_ClientStateControls[qzba].SaveData();};};};var form=document.forms[0];for(var qzba=0;qzba<form.length;qzba++){var element=form.elements[qzba];if(element.name){var elementValue=null;if(element.nodeName=="INPUT"){var inputType=element.getAttribute("TYPE").toUpperCase();if(inputType=="TEXT"||inputType=="PASSWORD"||inputType=="HIDDEN"){elementValue=element.value;}else if(inputType=="CHECKBOX"||inputType=="RADIO"){if(element.checked){elementValue=element.value;};};}else if(element.nodeName=="TEXTAREA"){elementValue=element.value;}else if(element.nodeName=="SELECT"){if(element.multiple){elementValue=[];for(var qzAde=0;qzAde<element.length;qzAde++){if(element.options[qzAde].selected){elementValue.push(element.options[qzAde].value);};};}else{elementValue=element.value;if(elementValue==""){elementValue=null;};};};if(elementValue instanceof Array){for(var qzAde=0;qzAde<elementValue.length;qzAde++){postData+="&"+element.name+"="+encodeURIComponent(elementValue[qzAde]);};}else if(elementValue){postData+="&"+element.name+"="+encodeURIComponent(elementValue);};};};if(!form.__VIEWSTATE){postData+="&__VIEWSTATE=";};if(!form.__EVENTTARGET){postData+="&__EVENTTARGET=";};};if(this.Debug){alert('Performing callback: '+param);};if(this.LoadingPanelClientTemplate){this.DomElement.innerHTML=this.LoadingPanelClientTemplate;};this.DoCallback(url,postData,param);return true;};window.ComponentArt_CallBack.prototype.DoCallback=function(url,postData,param){var ajaxbox=this,xmlHttpRequest=false,qzzc;function qzAjj(){ajaxbox.CallbackInProgress=false;var qznv=ajaxbox.get_events().getHandler('callbackComplete');if(qznv){qznv(ajaxbox,Sys.EventArgs.Empty);};if(ajaxbox.ClientSideOnCallbackComplete){setTimeout(ajaxbox.Id+'.ClientSideOnCallbackComplete()',10);};};function qzzs(){if(qzzc.readyState&&qzzc.readyState!=4&&qzzc.readyState!='complete'){return;};var responseText=qzzc.responseText;if(ajaxbox.Debug){if(responseText){alert('Received content:\n'+responseText);};};if(xmlHttpRequest){qzzc=qzzc.responseXML;};if(qzzc&&qzzc.documentElement){var arData=qzzc.documentElement,sEncodedContent=ajaxbox.ReadData(arData),sContent=sEncodedContent.replace(/\$\$\$CART_CDATA_CLOSE\$\$\$/g,"]]>");if(ajaxbox.Cache){ajaxbox.Cache[param]=sContent;};ajaxbox.ProcessContent(sContent);}else{var qznv=ajaxbox.get_events().getHandler('callbackError');if(qznv||ajaxbox.ClientSideOnCallbackError){if(qznv){qznv(ajaxbox,Sys.EventArgs.Empty);};if(ajaxbox.ClientSideOnCallbackError){ajaxbox.ClientSideOnCallbackError();};}else{alert('The data could not be loaded.');};};qzAjj();};if(window.XMLHttpRequest){xmlHttpRequest=true;qzzc=new XMLHttpRequest();qzzc.onreadystatechange=qzzs;qzzc.open("POST",url,true);qzzc.setRequestHeader('Content-Type','application/x-www-form-urlencoded');qzzc.send(postData);}else if(document.implementation&&document.implementation.createDocument){qzzc=document.implementation.createDocument("","",null);qzzc.onload=qzzs;}else if(document.all){if(window.ActiveXObject){try{qzzc=new ActiveXObject("Microsoft.XMLHTTP");qzzc.onreadystatechange=qzzs;qzzc.open("POST",url,true);qzzc.setRequestHeader('Content-Type','application/x-www-form-urlencoded');qzzc.send(postData);xmlHttpRequest=true;}catch(ex){};};if(qzzc==null){var qzac=this.Id+'_island',qzv=document.getElementById(qzac);if(!qzv){qzv=document.createElement('xml');qzv.id=qzac;document.body.appendChild(qzv);};if(qzv.XMLDocument){qzzc=qzv.XMLDocument;qzzc.onreadystatechange=qzzs;}else{return false;};};}else{if(this.Postback){this.Postback();};return false;};if(!xmlHttpRequest){qzzc.async=true;try{qzzc.load(url+ajaxbox.CallbackParamDelimiter+postData);}catch(ex){qzAjj();alert("Data not loaded: "+(ex.message?ex.message:ex));};};return true;};window.ComponentArt_CallBack.prototype.GetParameter=function(){if(this.Parameter){return this.Parameter;}else{var oParamObj=document.getElementById(this.Id+'_ParamField');if(oParamObj){this.Parameter=oParamObj.value;};};return this.Parameter;};window.ComponentArt_CallBack.prototype.ProcessContent=function(sContent){var scriptFiles=[],scriptBlocks=[],qzzv="",sProcessContent=sContent.toLowerCase();while(true){var iStartIndex=sProcessContent.indexOf("<script");if(iStartIndex<0){break;}else{var iStartScriptIndex=sProcessContent.indexOf(">",iStartIndex)+1,iEndScriptIndex=sProcessContent.indexOf("</scr"+"ipt>",iStartIndex);if(iEndScriptIndex>=iStartScriptIndex){if(iEndScriptIndex==iStartScriptIndex){var iStartFileNameIndex=sProcessContent.indexOf('src="',iStartIndex);if(iStartFileNameIndex>0){iStartFileNameIndex+=5;var iEndFileNameIndex=sProcessContent.indexOf('"',iStartFileNameIndex),sFileName=sContent.substring(iStartFileNameIndex,iEndFileNameIndex);if(sFileName.length>0){var headElement=document.getElementsByTagName("head").item(0);if(headElement){var arHeadScripts=headElement.getElementsByTagName('script'),bPreLoaded=false;for(var qzAde=0;qzAde<arHeadScripts.length;qzAde++){if(arHeadScripts[qzAde].src&&arHeadScripts[qzAde].src==sFileName){bPreLoaded=true;break;};};if(!bPreLoaded){scriptFiles[scriptFiles.length]=sFileName;};};};};};var iEndIndex=iEndScriptIndex+9;if(iEndScriptIndex>iStartScriptIndex){var sScriptBlock=sContent.substring(iStartScriptIndex,iEndScriptIndex);scriptBlocks[scriptBlocks.length]=sScriptBlock;};sContent=sContent.substring(0,iStartIndex)+sContent.substring(iEndIndex);sProcessContent=sProcessContent.substring(0,iStartIndex)+sProcessContent.substring(iEndIndex);};};};this.DomElement.innerHTML=sContent;for(var qzba=0;qzba<scriptFiles.length;qzba++){var scriptElement=document.createElement("script");scriptElement.setAttribute("type","text/javascript");scriptElement.setAttribute("src",scriptFiles[qzba]);document.getElementsByTagName("head").item(0).appendChild(scriptElement);};for(var qzba=0;qzba<scriptBlocks.length;qzba++){var scriptElement=document.createElement('script');scriptElement.setAttribute("type","text/javascript");scriptElement.text=scriptBlocks[qzba];document.body.appendChild(scriptElement);};};window.ComponentArt_CallBack_Loaded=true;};
